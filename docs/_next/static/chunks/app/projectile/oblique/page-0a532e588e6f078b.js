(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[394],{9268:function(e,t,n){Promise.resolve().then(n.bind(n,6373))},6373:function(e,t,n){"use strict";n.r(t),n.d(t,{DataContext:function(){return m},default:function(){return w}});var r=n(7437),i=n(2265),a=n(7776);function s(e){return Math.PI*e/180}var o=n(8318),c=n(8960),l=n(3830),u=n(2808),h=n(5225),x=n(8684),d=n(3092);function p(){let e=(0,i.useRef)(),t=(0,i.useRef)(),n=(0,i.useRef)(),o=(0,i.useRef)(),p=(0,i.useContext)(m),[y,f]=p.active,[j,v]=p.ballInfo,[w,Z]=p.graphType,[g,C]=p.graphData,[b,M]=p.cameraPos,k=p.init[1],S=p.showTrail[1],_=p.showGrid[1],[V,G]=(0,i.useState)({}),{showGraph:L}=(0,i.useContext)(d.ShowUIContext);return(0,r.jsxs)("div",{children:[(0,r.jsx)(x.Z,{initialPos:{x:10,y:40},children:(0,r.jsxs)("div",{style:{width:"200px",background:"#fff",display:"inline-block"},className:"p-2",children:[(0,r.jsxs)(l.Z,{children:[(0,r.jsxs)(l.Z.Group,{children:[(0,r.jsx)(l.Z.Label,{children:"初期位置-Y"}),(0,r.jsx)(c.Z,{min:5,max:100,step:1,defaultValue:10,ref:e})]}),(0,r.jsxs)(l.Z.Group,{children:[(0,r.jsx)(l.Z.Label,{children:"角度"}),(0,r.jsx)(c.Z,{min:0,max:90,step:1,defaultValue:45,ref:t})]}),(0,r.jsxs)(l.Z.Group,{children:[(0,r.jsx)(l.Z.Label,{children:"初速度"}),(0,r.jsx)(c.Z,{min:5,max:20,step:1,defaultValue:15,ref:n})]}),(0,r.jsxs)(l.Z.Group,{children:[(0,r.jsx)(l.Z.Label,{children:"グラフタイプ"}),(0,r.jsxs)(l.Z.Select,{onChange:e=>{Z(+e.target.value)},children:[(0,r.jsx)("option",{value:0,children:"y-t"}),(0,r.jsx)("option",{value:1,children:"Vy-t"})]})]}),(0,r.jsx)(l.Z.Check,{ref:o,type:"switch",label:"軌跡を表示",defaultChecked:!0}),(0,r.jsx)(l.Z.Check,{type:"switch",label:"XYグリッドを表示",onChange:e=>{_(e.target.checked)}})]}),(0,r.jsx)(u.Z,{variant:"primary",onClick:()=>{let r={position:new a.Vector3(0,0,0),velocity:new a.Vector3(0,0,0)};r.position.y=+e.current.value;let i=+n.current.value,c=s(+t.current.value);r.velocity.x=i*Math.cos(c),r.velocity.y=i*Math.sin(c),v(r),S(o.current.checked),k(!0),C([]);let l=+e.current.value+.5*Math.pow(i*Math.sin(c),2)/9.8;M({x:10,y:l/2,z:1.5*l}),G({y:+e.current.value,vy:i*Math.sin(c)})},children:"適用"}),(0,r.jsx)(u.Z,{variant:"primary",onClick:e=>{f(!y),"再生"===e.target.innerHTML?e.target.innerHTML="一時停止":e.target.innerHTML="再生"},children:"再生"})]})}),L&&(0,r.jsx)(x.Z,{initialPos:{x:250,y:40},children:(e=>{let t=V.y,n=V.vy,i=Math.sqrt(Math.pow(n,2)+19.6*t);switch(e){case 0:return(0,r.jsx)(h.Z,{title:"y-tグラフ",size:{width:250,height:250},data:{x:g.map(e=>e.t),y:g.map(e=>e.data.position.y),x_range:{min:0,max:30},y_range:{min:0,max:t+.5*Math.pow(n,2)/9.8}},drawLine:!0});case 1:return(0,r.jsx)(h.Z,{title:"Vy-tグラフ",size:{width:250,height:250},data:{x:g.map(e=>e.t),y:g.map(e=>e.data.velocity.y),x_range:{min:0,max:30},y_range:{min:-i,max:i}},drawLine:!0});default:return null}})(w)})]})}var y=n(5972),f=n(6277),j=n(8915);function v(){let e=(0,i.useContext)(m),t=e.active[0],[n,s]=e.ballInfo,o=e.cameraPos[0],[c,l]=e.graphData,[u,h]=e.init,x=e.showTrail[0],d=e.showGrid[0];return(0,r.jsxs)(f.Z,{showGrid:d,children:[(0,r.jsx)(f.N,{camera_pos:o,camera_lookAt:new a.Vector3(o.x,o.y,0)}),(0,r.jsx)(y.Z,{pos:n.position,velocity:n.velocity,radius:j.px,color:j.SQ,show_trail:x,trail_cooltime:j.Xd,onChange:s,renderGraph:!0,updateGraph:(e,t)=>{l([...c,{t:e,data:t}])},active:t,init:{init:u,setInit:h}})]})}let m=(0,i.createContext)(null);function w(){let[e,t]=(0,i.useState)(!1),[n,c]=(0,i.useState)({position:new a.Vector3(0,10,0),velocity:new a.Vector3(15*Math.cos(s(45)),15*Math.sin(s(45)),0)}),[l,u]=(0,i.useState)({x:10,y:10,z:40}),[h,x]=(0,i.useState)(0),[d,y]=(0,i.useState)(!0),[f,j]=(0,i.useState)(!1),[w,Z]=(0,i.useState)(!1),[g,C]=(0,i.useState)([]);return(0,r.jsx)(m.Provider,{value:{cameraPos:[l,u],graphType:[h,x],graphData:[g,C],init:[f,j],showTrail:[d,y],showGrid:[w,Z],active:[e,t],ballInfo:[n,c]},children:(0,r.jsx)(o.Z,{top:(0,r.jsx)(p,{}),bottom:(0,r.jsx)(v,{})})})}},5972:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(7437),i=n(8842),a=n(2265),s=n(7776),o=n(2238),c=n(4823);function l(e){let{pos:t,velocity:n,radius:l,color:u,onChange:h,show_trail:x=!1,trail_cooltime:d=.2,renderGraph:p=!1,updateGraph:y=()=>{},active:f=!0,init:j={init:!1,setInit:()=>{}}}=e,v=(0,a.useRef)(n.y),[m,w]=(0,a.useState)([]),Z=(0,a.useRef)(),g=(0,a.useRef)(0),C=(0,a.useRef)(0);return(0,a.useEffect)(()=>{v.current=n.y},[t,n]),(0,a.useEffect)(()=>{},[j.init]),(0,i.C)((e,t)=>{if(!(f&&t<.1))return;j.init&&(v.current=n.y,console.log(n.y),w([]),g.current=0,j.setInit(!1)),v.current+=-9.8*t;let r=Z.current;r.position.x+=n.x*t,r.position.y+=v.current*t,r.position.z+=n.z*t,r.position.y<l&&(v.current=-(1*v.current),r.position.y=l),C.current>=d&&(x&&w([...m,Z.current.position.clone()]),p&&y(g.current,{position:r.position.clone(),velocity:new s.Vector3(n.x,v.current,n.z)}),C.current-=d),g.current+=t,C.current+=t,h({position:r.position,velocity:new s.Vector3(n.x,v.current,n.z)})}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.aL,{position:[t.x,t.y,t.z],castShadow:!0,ref:Z,args:[l,32,32],children:(0,r.jsx)("meshPhysicalMaterial",{color:u,metalness:0,roughness:.2})}),(0,r.jsx)(o.Z,{radius:l,color:u,pos:m})]})}}},function(e){e.O(0,[355,114,689,881,420,602,817,971,23,744],function(){return e(e.s=9268)}),_N_E=e.O()}]);