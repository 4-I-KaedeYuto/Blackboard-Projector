(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[538],{1994:function(e,t,n){Promise.resolve().then(n.bind(n,9590))},9590:function(e,t,n){"use strict";n.r(t),n.d(t,{DataContext:function(){return j},default:function(){return m}});var r=n(7437),i=n(2265),a=n(7776),s=n(8318),o=n(3830),c=n(2808),l=n(8960),u=n(5225),h=n(3092),x=n(8684);function p(){let e=(0,i.useRef)(),t=(0,i.useRef)(),n=(0,i.useRef)(),s=(0,i.useContext)(j),[p,d]=s.active,[y,f]=s.ballInfo,[v,m]=s.cameraPos,w=s.init[1],g=s.showTrail[1],Z=s.showGrid[1],[C,b]=s.graphType,[k,S]=s.graphData,[_,z]=(0,i.useState)({}),{showGraph:V}=(0,i.useContext)(h.ShowUIContext);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.Z,{initialPos:{x:10,y:60},children:(0,r.jsxs)("div",{style:{width:"200px",background:"#fff",display:"inline-block"},className:"p-2",children:[(0,r.jsxs)(o.Z,{children:[(0,r.jsx)(o.Z.Label,{children:"初期位置-Y"}),(0,r.jsx)(l.Z,{min:5,max:100,step:1,defaultValue:10,ref:e}),(0,r.jsx)(o.Z.Label,{children:"初期速度-Y"}),(0,r.jsx)(l.Z,{min:5,max:30,step:1,defaultValue:10,ref:t}),(0,r.jsxs)(o.Z.Group,{children:[(0,r.jsx)(o.Z.Label,{children:"グラフタイプ"}),(0,r.jsxs)(o.Z.Select,{onChange:e=>{b(+e.target.value)},children:[(0,r.jsx)("option",{value:0,children:"y-t"}),(0,r.jsx)("option",{value:1,children:"Vy-t"})]})]}),(0,r.jsx)(o.Z.Check,{ref:n,type:"switch",label:"軌跡を表示",defaultChecked:!0}),(0,r.jsx)(o.Z.Check,{type:"switch",label:"XYグリッドを表示",onChange:e=>{Z(e.target.checked)}})]}),(0,r.jsx)(c.Z,{variant:"primary",onClick:()=>{let r={...y},i=y.position,s=y.velocity;r.position=new a.Vector3(i.x,+e.current.value,i.z),r.velocity=new a.Vector3(s.x,+t.current.value,s.z),f(r),g(n.current.checked),w(!0),S([]);let o=+e.current.value+.5*Math.pow(+t.current.value,2)/9.8;m({x:0,y:o/2,z:1.5*o}),z({y:+e.current.value,vy:+t.current.value})},children:"適用"}),(0,r.jsx)(c.Z,{variant:"primary",onClick:e=>{d(!p),"再生"===e.target.innerHTML?e.target.innerHTML="一時停止":e.target.innerHTML="再生"},children:"再生"})]})}),V&&(0,r.jsx)(x.Z,{initialPos:{x:250,y:60},children:(e=>{let t=_.y,n=_.vy,i=Math.sqrt(Math.pow(n,2)+19.6*t);switch(e){case 0:return(0,r.jsx)(u.Z,{position:{x:0,y:630},title:"y-tグラフ",size:{width:250,height:250},data:{x:k.map(e=>e.t),y:k.map(e=>e.data.position.y),x_range:{min:0,max:30},y_range:{min:0,max:t+.5*Math.pow(n,2)/9.8}},drawLine:!0});case 1:return(0,r.jsx)(u.Z,{position:{x:0,y:630},title:"Vy-tグラフ",size:{width:250,height:250},data:{x:k.map(e=>e.t),y:k.map(e=>e.data.velocity.y),x_range:{min:0,max:30},y_range:{min:-i,max:i}},drawLine:!0});default:return null}})(C)})]})}var d=n(5972),y=n(6277),f=n(8915);function v(){let e=(0,i.useContext)(j),t=e.active[0],[n,s]=e.ballInfo,o=e.cameraPos[0],[c,l]=e.init,u=e.showTrail[0],h=e.showGrid[0],[x,p]=e.graphData;return(0,r.jsxs)(y.Z,{showGrid:h,children:[(0,r.jsx)(y.N,{camera_pos:o,camera_lookAt:new a.Vector3(o.x,o.y,0)}),(0,r.jsx)(d.Z,{pos:n.position,velocity:n.velocity,radius:f.px,color:f.SQ,show_trail:u,trail_cooltime:f.Xd,onChange:s,renderGraph:!0,updateGraph:(e,t)=>{p([...x,{t:e,data:t}])},active:t,init:{init:c,setInit:l}})]})}let j=(0,i.createContext)(null);function m(){let[e,t]=(0,i.useState)(!1),[n,o]=(0,i.useState)({position:new a.Vector3(0,10,0),velocity:new a.Vector3(0,10,0)}),[c,l]=(0,i.useState)({x:0,y:5,z:20}),[u,h]=(0,i.useState)(!1),[x,d]=(0,i.useState)(!0),[y,f]=(0,i.useState)(!1),[m,w]=(0,i.useState)(0),[g,Z]=(0,i.useState)([]);return(0,r.jsx)(j.Provider,{value:{cameraPos:[c,l],graphType:[m,w],graphData:[g,Z],init:[u,h],showTrail:[x,d],showGrid:[y,f],active:[e,t],ballInfo:[n,o]},children:(0,r.jsx)(s.Z,{top:(0,r.jsx)(p,{}),bottom:(0,r.jsx)(v,{})})})}},5972:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(7437),i=n(8842),a=n(2265),s=n(7776),o=n(2238),c=n(4823);function l(e){let{pos:t,velocity:n,radius:l,color:u,onChange:h,show_trail:x=!1,trail_cooltime:p=.2,renderGraph:d=!1,updateGraph:y=()=>{},active:f=!0,init:v={init:!1,setInit:()=>{}}}=e,j=(0,a.useRef)(n.y),[m,w]=(0,a.useState)([]),g=(0,a.useRef)(),Z=(0,a.useRef)(0),C=(0,a.useRef)(0);return(0,a.useEffect)(()=>{j.current=n.y},[t,n]),(0,a.useEffect)(()=>{},[v.init]),(0,i.C)((e,t)=>{if(!(f&&t<.1))return;v.init&&(j.current=n.y,console.log(n.y),w([]),Z.current=0,v.setInit(!1)),j.current+=-9.8*t;let r=g.current;r.position.x+=n.x*t,r.position.y+=j.current*t,r.position.z+=n.z*t,r.position.y<l&&(j.current=-(1*j.current),r.position.y=l),C.current>=p&&(x&&w([...m,g.current.position.clone()]),d&&y(Z.current,{position:r.position.clone(),velocity:new s.Vector3(n.x,j.current,n.z)}),C.current-=p),Z.current+=t,C.current+=t,h({position:r.position,velocity:new s.Vector3(n.x,j.current,n.z)})}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.aL,{position:[t.x,t.y,t.z],castShadow:!0,ref:g,args:[l,32,32],children:(0,r.jsx)("meshPhysicalMaterial",{color:u,metalness:0,roughness:.2})}),(0,r.jsx)(o.Z,{radius:l,color:u,pos:m})]})}}},function(e){e.O(0,[355,114,689,881,420,602,817,971,23,744],function(){return e(e.s=1994)}),_N_E=e.O()}]);