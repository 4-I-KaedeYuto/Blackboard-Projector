(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[259],{8994:function(e,t,r){Promise.resolve().then(r.bind(r,3790))},2660:function(e,t,r){"use strict";r.r(t),r.d(t,{ContextShowMenu:function(){return u},default:function(){return d}});var n=r(7437),i=r(4321),o=r.n(i);r(6247);var l=r(2265),a=r(4536),s=r(3919);function c(){let{showMenu:e,setShowMenu:t}=(0,l.useContext)(u);return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(a.Z,{show:e,onHide:()=>t(!1),children:[(0,n.jsx)(a.Z.Header,{closeButton:!0,children:(0,n.jsx)(a.Z.Title,{children:"メニュー"})}),(0,n.jsx)(a.Z.Body,{children:(0,n.jsxs)(s.Z,{children:[(0,n.jsx)(s.Z.Item,{href:"./",action:!0,children:"Home"}),(0,n.jsx)(s.Z.Item,{href:"./projectile/freefall",action:!0,children:"自由落下"}),(0,n.jsx)(s.Z.Item,{href:"./projectile/throwup",action:!0,children:"鉛直投げ上げ"}),(0,n.jsx)(s.Z.Item,{href:"./projectile/horizontal",action:!0,children:"水平投射"}),(0,n.jsx)(s.Z.Item,{href:"./projectile/oblique",action:!0,children:"斜方投射"}),(0,n.jsx)(s.Z.Item,{href:"./projectile/monkeyhunting",action:!0,children:"モンキーハンティング"})]})})]})})}let u=(0,l.createContext)(null);function d(e){let{children:t}=e,[r,i]=(0,l.useState)(!1);return(0,n.jsxs)("html",{lang:"ja",children:[(0,n.jsx)("head",{children:(0,n.jsx)("title",{children:"ここにタイトルが入ります"})}),(0,n.jsx)("body",{className:o().className,children:(0,n.jsxs)(u.Provider,{value:{showMenu:r,setShowMenu:i},children:[(0,n.jsx)(c,{}),t]})})]})}},3790:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return v}});var n=r(7437),i=r(7776),o=r(3149),l=r(2988),a=r(2265),s=r(8842),c=r(5087);let u=e=>"function"==typeof e,d=a.forwardRef(({envMap:e,resolution:t=256,frames:r=1/0,children:n,makeDefault:i,...o},d)=>{let h=(0,s.A)(({set:e})=>e),f=(0,s.A)(({camera:e})=>e),m=(0,s.A)(({size:e})=>e),x=a.useRef(null);a.useImperativeHandle(d,()=>x.current,[]);let p=a.useRef(null),g=(0,c.R)(t);a.useLayoutEffect(()=>{o.manual||x.current.updateProjectionMatrix()},[m,o]),a.useLayoutEffect(()=>{x.current.updateProjectionMatrix()}),a.useLayoutEffect(()=>{if(i)return h(()=>({camera:x.current})),()=>h(()=>({camera:f}))},[x,i,h]);let v=0,y=null,j=u(n);return(0,s.C)(t=>{j&&(r===1/0||v<r)&&(p.current.visible=!1,t.gl.setRenderTarget(g),y=t.scene.background,e&&(t.scene.background=e),t.gl.render(t.scene,x.current),t.scene.background=y,t.gl.setRenderTarget(null),p.current.visible=!0,v++)}),a.createElement(a.Fragment,null,a.createElement("orthographicCamera",(0,l.Z)({left:-(m.width/2),right:m.width/2,top:m.height/2,bottom:-(m.height/2),ref:x},o),!j&&n),a.createElement("group",{ref:p},j&&n(g.texture)))});var h=r(4823),f=r(2325),m=r(2808),x=r(2660);function p(e){let{children:t}=e,{setShowMenu:r}=(0,a.useContext)(x.ContextShowMenu);return(0,n.jsx)("div",{className:"App text-center",style:{height:"100%"},children:(0,n.jsxs)(o.Xz,{shadows:!0,gl:{alpha:!0,antialias:!0},onCreated:e=>{let{scene:t}=e;t.background=new i.Color("#000")},children:[(0,n.jsx)("fog",{attach:"fog",args:["#000",500,1e3]}),(0,n.jsx)(d,{makeDefault:!0,position:[0,0,10],zoom:100}),(0,n.jsx)("axesHelper",{args:[5]}),(0,n.jsx)("ambientLight",{color:16777215,intensity:1}),(0,n.jsx)(h.xu,{args:[1e3,.1,1],position:[0,0,0],rotation:[0,0,0],children:(0,n.jsx)("meshStandardMaterial",{color:"#eeeeee"})}),t,(0,n.jsx)(f.V,{calculatePosition:()=>[0,0],style:{width:"50vw",textAlign:"left"},zIndexRange:[999,0],children:(0,n.jsx)(m.Z,{variant:"outline-secondary",className:"ml-2",onClick:()=>{r(!0)},children:"メニューを表示"})})]})})}function g(e){let{position:t,size:r,color:i}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(h.xu,{position:t,args:[r.x,r.y,1],children:(0,n.jsx)("meshStandardMaterial",{color:i})})})}function v(){return(0,n.jsx)(p,{children:(0,n.jsx)(y,{})})}function y(){return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(g,{position:new i.Vector3(1,1,0),size:new i.Vector2(1,1),color:"#f00"})})}},2325:function(e,t,r){"use strict";let n,i;r.d(t,{V:function(){return y}});var o=r(2988),l=r(2265),a=r(4040),s=r(7776),c=r(8842);let u=new s.Vector3,d=new s.Vector3,h=new s.Vector3,f=new s.Vector2;function m(e,t,r){let n=u.setFromMatrixPosition(e.matrixWorld);n.project(t);let i=r.width/2,o=r.height/2;return[n.x*i+i,-(n.y*o)+o]}let x=e=>1e-10>Math.abs(e)?0:e;function p(e,t,r=""){let n="matrix3d(";for(let r=0;16!==r;r++)n+=x(t[r]*e.elements[r])+(15!==r?",":")");return r+n}let g=(n=[1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1],e=>p(e,n)),v=(i=e=>[1/e,1/e,1/e,1,-1/e,-1/e,-1/e,-1,1/e,1/e,1/e,1,1,1,1,1],(e,t)=>p(e,i(t),"translate(-50%,-50%)")),y=l.forwardRef(({children:e,eps:t=.001,style:r,className:n,prepend:i,center:p,fullscreen:y,portal:j,distanceFactor:M,sprite:w=!1,transform:b=!1,occlude:P,onOcclude:E,castShadow:C,receiveShadow:S,material:W,geometry:R,zIndexRange:k=[16777271,0],calculatePosition:z=m,as:$="div",wrapperClass:I,pointerEvents:Z="auto",...F},A)=>{let{gl:N,camera:T,scene:H,size:V,raycaster:L,events:_,viewport:O}=(0,c.A)(),[D]=l.useState(()=>document.createElement($)),B=l.useRef(),q=l.useRef(null),G=l.useRef(0),X=l.useRef([0,0]),J=l.useRef(null),K=l.useRef(null),Q=(null==j?void 0:j.current)||_.connected||N.domElement.parentNode,U=l.useRef(null),Y=l.useRef(!1),ee=l.useMemo(()=>{var e;return P&&"blending"!==P||Array.isArray(P)&&P.length&&(e=P[0])&&"object"==typeof e&&"current"in e},[P]);l.useLayoutEffect(()=>{let e=N.domElement;P&&"blending"===P?(e.style.zIndex=`${Math.floor(k[0]/2)}`,e.style.position="absolute",e.style.pointerEvents="none"):(e.style.zIndex=null,e.style.position=null,e.style.pointerEvents=null)},[P]),l.useLayoutEffect(()=>{if(q.current){let e=B.current=a.createRoot(D);if(H.updateMatrixWorld(),b)D.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{let e=z(q.current,T,V);D.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${e[0]}px,${e[1]}px,0);transform-origin:0 0;`}return Q&&(i?Q.prepend(D):Q.appendChild(D)),()=>{Q&&Q.removeChild(D),e.unmount()}}},[Q,b]),l.useLayoutEffect(()=>{I&&(D.className=I)},[I]);let et=l.useMemo(()=>b?{position:"absolute",top:0,left:0,width:V.width,height:V.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:p?"translate3d(-50%,-50%,0)":"none",...y&&{top:-V.height/2,left:-V.width/2,width:V.width,height:V.height},...r},[r,p,y,V,b]),er=l.useMemo(()=>({position:"absolute",pointerEvents:Z}),[Z]);l.useLayoutEffect(()=>{var t,i;Y.current=!1,b?null==(t=B.current)||t.render(l.createElement("div",{ref:J,style:et},l.createElement("div",{ref:K,style:er},l.createElement("div",{ref:A,className:n,style:r,children:e})))):null==(i=B.current)||i.render(l.createElement("div",{ref:A,style:et,className:n,children:e}))});let en=l.useRef(!0);(0,c.C)(e=>{if(q.current){T.updateMatrixWorld(),q.current.updateWorldMatrix(!0,!1);let e=b?X.current:z(q.current,T,V);if(b||Math.abs(G.current-T.zoom)>t||Math.abs(X.current[0]-e[0])>t||Math.abs(X.current[1]-e[1])>t){let t=function(e,t){let r=u.setFromMatrixPosition(e.matrixWorld),n=d.setFromMatrixPosition(t.matrixWorld),i=r.sub(n),o=t.getWorldDirection(h);return i.angleTo(o)>Math.PI/2}(q.current,T),r=!1;ee&&(Array.isArray(P)?r=P.map(e=>e.current):"blending"!==P&&(r=[H]));let n=en.current;if(r){let e=function(e,t,r,n){let i=u.setFromMatrixPosition(e.matrixWorld),o=i.clone();o.project(t),f.set(o.x,o.y),r.setFromCamera(f,t);let l=r.intersectObjects(n,!0);if(l.length){let e=l[0].distance;return i.distanceTo(r.ray.origin)<e}return!0}(q.current,T,L,r);en.current=e&&!t}else en.current=!t;n!==en.current&&(E?E(!en.current):D.style.display=en.current?"block":"none");let i=Math.floor(k[0]/2),o=P?ee?[k[0],i]:[i-1,0]:k;if(D.style.zIndex=`${function(e,t,r){if(t instanceof s.PerspectiveCamera||t instanceof s.OrthographicCamera){let n=u.setFromMatrixPosition(e.matrixWorld),i=d.setFromMatrixPosition(t.matrixWorld),o=n.distanceTo(i),l=(r[1]-r[0])/(t.far-t.near),a=r[1]-l*t.far;return Math.round(l*o+a)}}(q.current,T,o)}`,b){let[e,t]=[V.width/2,V.height/2],r=T.projectionMatrix.elements[5]*t,{isOrthographicCamera:n,top:i,left:o,bottom:l,right:a}=T,s=g(T.matrixWorldInverse),c=n?`scale(${r})translate(${x(-(a+o)/2)}px,${x((i+l)/2)}px)`:`translateZ(${r}px)`,u=q.current.matrixWorld;w&&((u=T.matrixWorldInverse.clone().transpose().copyPosition(u).scale(q.current.scale)).elements[3]=u.elements[7]=u.elements[11]=0,u.elements[15]=1),D.style.width=V.width+"px",D.style.height=V.height+"px",D.style.perspective=n?"":`${r}px`,J.current&&K.current&&(J.current.style.transform=`${c}${s}translate(${e}px,${t}px)`,K.current.style.transform=v(u,1/((M||10)/400)))}else{let t=void 0===M?1:function(e,t){if(t instanceof s.OrthographicCamera)return t.zoom;if(!(t instanceof s.PerspectiveCamera))return 1;{let r=u.setFromMatrixPosition(e.matrixWorld),n=d.setFromMatrixPosition(t.matrixWorld);return 1/(2*Math.tan(t.fov*Math.PI/180/2)*r.distanceTo(n))}}(q.current,T)*M;D.style.transform=`translate3d(${e[0]}px,${e[1]}px,0) scale(${t})`}X.current=e,G.current=T.zoom}}if(!ee&&U.current&&!Y.current){if(b){if(J.current){let e=J.current.children[0];if(null!=e&&e.clientWidth&&null!=e&&e.clientHeight){let{isOrthographicCamera:t}=T;if(t||R)F.scale&&(Array.isArray(F.scale)?F.scale instanceof s.Vector3?U.current.scale.copy(F.scale.clone().divideScalar(1)):U.current.scale.set(1/F.scale[0],1/F.scale[1],1/F.scale[2]):U.current.scale.setScalar(1/F.scale));else{let t=(M||10)/400,r=e.clientWidth*t,n=e.clientHeight*t;U.current.scale.set(r,n,1)}Y.current=!0}}}else{let t=D.children[0];if(null!=t&&t.clientWidth&&null!=t&&t.clientHeight){let e=1/O.factor,r=t.clientWidth*e,n=t.clientHeight*e;U.current.scale.set(r,n,1),Y.current=!0}U.current.lookAt(e.camera.position)}}});let ei=l.useMemo(()=>({vertexShader:b?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[b]);return l.createElement("group",(0,o.Z)({},F,{ref:q}),P&&!ee&&l.createElement("mesh",{castShadow:C,receiveShadow:S,ref:U},R||l.createElement("planeGeometry",null),W||l.createElement("shaderMaterial",{side:s.DoubleSide,vertexShader:ei.vertexShader,fragmentShader:ei.fragmentShader})))})},6247:function(){}},function(e){e.O(0,[355,114,689,881,420,971,23,744],function(){return e(e.s=8994)}),_N_E=e.O()}]);